---
lang: zh-CN
title: 基础-03-场景下的触发器
---

## 1.简介

触发器，顾名思义就是用于判断哪个场景应该被触发执行。

一个自动战斗配置，会包含若干个拥有触发器的场景，和一个没有触发器的场景。

- 有触发器的场景: 用于处理战斗中的突发情况，例如黄光闪避、连携换人、快速支援等。
- 没有触发器的场景: 用于正常连招，按当前角色判断做对应动作。

## 2.示例讲解

<details>
<summary>例子</summary>

```yaml

scenes:

  - triggers: [ "闪避识别-黄光", "闪避识别-红光", "闪避识别-声音" ]
    interval: 1
    handlers: ...

  - triggers: [ "按键可用-快速支援" ]
    interval: 1
    handlers: ...

  - triggers: [ "按键可用-连携技" ]
    interval: 1
    handlers: ...

  - triggers: [ ]
    interval: 0.02
    handlers: ...
```

</details>

触发器(triggers) 是一个数组，里面的元素是字符串，每个元素是对应的可以触发这个场景的状态(state)，同一个场景可以被多个状态触发

上述是一个通用模版，基本可以在所有队伍中使用，主要分为以下场景

- `[ "闪避识别-黄光", "闪避识别-红光", "闪避识别-声音" ]` - 需要闪避的情况，这三个通常放在一起，然后在handlers中使用状态表达式(states)再分别处理。
- `[ "按键可用-快速支援" ]` - 出现快速支援的情况，判断是否进行快速支援换人。
- `[ "按键可用-连携技" ]` - 出现连携技的情况，判断是否连携换人。
- `[ ]` - 普通情况，进行连招。

## 3.工作原理

脚本识别到某个状态后，都会判断这个状态有没有用于触发器场景，如果有的话，就 __尝试__ 去触发这个场景。

至于更具体的场景处理方法说明，见 [基础-02-场景](basic_02_scenes.md)。

### 3.1.1.可用状态

任何脚本能识别的状态，都能用在触发器中，详情可见 [基础-90-状态枚举](basic_90_states_enum.md)

但是，对于高频识别的状态，就不建议用在触发器上，例如 `前台-强攻` 这种。