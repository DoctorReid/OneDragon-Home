import{_ as i}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,b as n,o as l}from"./app-B7KLoWbQ.js";const t={};function e(h,s){return l(),a("div",null,s[0]||(s[0]=[n(`<h2 id="_1-基础讲解" tabindex="-1"><a class="header-anchor" href="#_1-基础讲解"><span>1.基础讲解</span></a></h2><p>自定义指令，本质上就是一个<code>识别画面</code>的线程和一个<code>操作</code>的线程在同时运行。</p><p><code>识别画面</code>的线程，对游戏画面进行识别后，通过触发和设置各种<code>状态</code>，来指导<code>操作</code>的线程做具体的操作。</p><p><code>操作</code>的线程，会区分常规循环操作和特殊事件触发操作。没有特殊事件时，以常规循环操作；发生特殊事件时，打断当前操作，进行特殊事件对应的操作。</p><p>换成游戏过程来解释就是，假设我当前配队是 安比 + 妮可 + 朱鸢，一个完整的战斗流程大概是以下这样的：</p><ol><li>正常情况，我需要安比站场打失衡。这是 <code>常规循环操作</code> 。</li><li>如果怪物攻击，画面出现黄光或者红光，那需要进行闪避，或者格挡。闪光的出现，是 <code>特殊事件触发操作</code> 。</li><li>当我把怪物打入失衡，触发了<code>连携技</code>，需要选择换人。<code>连携技按钮</code>的出现，是 <code>特殊事件触发操作</code> 。</li><li>连携技换人后，我需要先切换妮可，触发<code>快速支援</code>。<code>快速支援按钮</code>的出现，是 <code>特殊事件触发操作</code> 。</li><li>最后，朱鸢登场后，不断长按普攻清空弹匣。这是 <code>常规循环操作</code>。</li></ol><p>下述就以这个 <a href="https://github.com/DoctorReid/ZenlessZoneZero-OneDragon/blob/main/config/auto_battle/%E6%96%87%E6%A1%A3%E8%AE%B2%E8%A7%A3%E7%A4%BA%E4%BE%8B.sample.yml" target="_blank" rel="noopener noreferrer">例子</a> 让你初步了解自定义指令以及如何编写。</p><p>注意：本例子仅为讲解而拼凑内容写出，无法用于实战。</p><h3 id="_1-1-配置文件" tabindex="-1"><a class="header-anchor" href="#_1-1-配置文件"><span>1.1.配置文件</span></a></h3><p>目前没有编辑器页面，需自行编辑。 配置文件为 <code>yaml</code>格式，(不懂的自行找<a href="https://tongyi.aliyun.com/qianwen/" target="_blank" rel="noopener noreferrer">通义千问</a>)</p><p><strong>希望有人在理解整套运行框架后可以提供一个可视化布局的设计</strong></p><p>配置文件按使用场景存放在不同目录下</p><ul><li>闪避助手 - config/dodge/</li><li>自动战斗 - config/auto_battle/</li></ul><p>脚本中已经自带了部分配置文件，你可以直接使用，也可以在理解完本页内容后自行修改编写。</p><p>编辑时，请复制 <code>*.sample.yml</code> 文件，更改为自己的名称。否则 <code>.sample.yml</code> 的修改会在代码同步时被覆盖。后续所有配置文件同理。</p><h3 id="_1-2-场景与触发器" tabindex="-1"><a class="header-anchor" href="#_1-2-场景与触发器"><span>1.2.场景与触发器</span></a></h3><p>我们先来看 <code>scenes</code> (场景)部分的配置。</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">scenes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;闪避识别-黄光&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;闪避识别-红光&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键可用-快速支援&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键可用-连携技&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: []</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.5</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>一个自定义指令中，会存在多个<code>场景</code> (<code>scenes</code> 是一个列表)。</p><ul><li><span style="color:red;"><strong>会有若干场景需要触发器(triggers)，即运行过程中，脚本识别游戏过程发生了某个特殊事件，就会触发这个场景下的处理器(handlers)</strong></span>。如上所示: <ul><li>出现 <code>闪避识别-黄光</code> 或者 <code>闪避识别-红光</code> 的时候会触发第1个场景里的处理器 (handlers)</li><li>出现 <code>按键可用-快速支援</code> 的时候会触发第2个场景里的处理器 (handlers)</li><li>出现 <code>按键可用-连携技</code> 的时候会触发第3个场景里的处理器 (handlers)</li></ul></li><li>由于画面识别是持续不断的，机器性能越好，识别触发事件的频率就越高。因此<span style="color:red;"><strong>触发器设置有触发间隔(interval)</strong></span>，如上所示： <ul><li>出现 <code>闪避识别-黄光</code> 或者 <code>闪避识别-红光</code> 的之后，<code>1秒</code>内再次出现的 <code>闪避识别-黄光</code> 或者 <code>闪避识别-红光</code>，将不会再触发这个场景的处理器 (handlers)</li><li>下面2个场景同理</li></ul></li><li><span style="color:red;"><strong>只会有最多一个不需要触发器的场景，代表没有特殊事件时，就按这个场景去循环触发动作</strong></span>。例如安比不断地3A重击。</li><li><span style="color:red;"><strong>有触发器的场景，被触发时，会打断当前正在执行的场景指令，去执行被触发场景的指令。</strong></span>例如 <ul><li>安比在打3A重的时候，出现 <code>闪避识别-红光</code>，就会打断原来的后续攻击，执行闪避。</li><li>安比在打3A重的时候，将怪物打失衡了，出现 <code>按键可用-连携技</code>，就会打断后续攻击，执行连携技换人。</li></ul></li></ul><h3 id="_1-3-触发器优先级" tabindex="-1"><a class="header-anchor" href="#_1-3-触发器优先级"><span>1.3.触发器优先级</span></a></h3><p>还是按上面的配置，我们考虑以下情况</p><ol><li>场上有多个怪，其中一个出现黄光，我们切出了安比格挡，准备接下一个攻击的动作打失衡（挡刀后那一下重击）</li><li>这时候另一个怪闪了红光，我们就会打断当前动作去闪避。</li><li>可实际上这一步是可以不闪的，因为格挡后有一段无敌的时间。</li></ol><p>针对这个情况，我们引入优先级的概率，每个场景(触发器)，只会被更高优先级的打断。没有设置优先级的视为可以随便打断。</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">scenes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;闪避识别-黄光&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">99</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;闪避识别-红光&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  priority</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">99</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键可用-快速支援&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键可用-连携技&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: []</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.5</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上为改造后的例子</p><ul><li>使用 <code>priority</code> 声明场景的优先级</li><li>黄光、红光为最高优先级，可以打断其他场景</li><li>黄光、红光同等优先级，互相之间不可打断</li><li>其他场景没有优先级，可以随意打断</li></ul><h3 id="_1-4-状态判断及动作" tabindex="-1"><a class="header-anchor" href="#_1-4-状态判断及动作"><span>1.4.状态判断及动作</span></a></h3><p>区分场景后，每个场景中，需要做什么，就是上述的处理器 <code>handlers</code> 部分负责的内容。</p><p>每个处理器包含 多组的<code>状态判断(states)</code> 和 <code>执行动作(operations)</code></p><p><code>states</code> 部分为<code>状态判断</code>的表达式，满足表达式的情况下，就会执行动作 <code>operations</code>；不满足的话，就会继续判断下一个<code>states</code></p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;闪避识别-黄光&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;闪避识别-红光&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[闪避识别-黄光, 0, 1] &amp; [后台-2-强攻]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-切换角色-上一个&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-普通攻击&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[闪避识别-黄光, 0, 1]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-切换角色-下一个&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-普通攻击&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: []</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[闪避识别-红光, 0, 1]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-闪避&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-普通攻击&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: []</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[自定义-朱鸢-子弹]{6, 9}&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-普通攻击&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        way</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按下&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        press</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上述例子的解释如下</p><ol><li>如果 <code>闪避识别-黄光</code> 的时间是发生在 <code>0~1</code> 秒内，且后台第二个角色是强攻，那么就执行下面的 切上一个 + 平A</li><li>如果1不满足，就继续判断，如果 <code>闪避识别-黄光</code> 的时间是发生在 <code>0~1</code> 秒内，就执行下面的 切下一个 + 平A</li><li>如果2不满足，就继续判断， <code>闪避识别-红光</code> 的时间是发生在 <code>0~1</code> 秒内，则执行下面的 闪避 + 平A</li><li>如果3不满足，就继续判断， <code>自定义-朱鸢-子弹</code> 的时间是发生在 <code>0~1</code> 秒内，且子弹数是 <code>6~9</code> 之间，那就长按普通。</li><li>当然4这一行是不可能触发的，因为1~3行的场景已经把这个触发器下的场景都覆盖了；另外脚本目前也没有识别子单数的能力；写这里只是为了文档展示。</li></ol><h4 id="_1-4-1-状态说明" tabindex="-1"><a class="header-anchor" href="#_1-4-1-状态说明"><span>1.4.1.状态说明</span></a></h4><p>脚本运行时，会对游戏状态进行识别，我们将状态定义为以下3部分:</p><ul><li>状态的名称 - 即上述例子中 <code>[]</code>(中括号)里的内容。脚本支持的状态名称在下述章节再列举。</li><li>状态的识别时间 - 即什么时候出现(识别到)的这个状态。通常有两种时间，对于画面识别的，为截图时间；对于按键的，为按键时间。</li><li>状态的值 - 只有部分状态会有值的概念，例如能量条之类的。目前脚本支持的状态都还没有值，但可以在自定义状态中灵活使用。</li></ul><h4 id="_1-4-2-状态表达式" tabindex="-1"><a class="header-anchor" href="#_1-4-2-状态表达式"><span>1.4.2.状态表达式</span></a></h4><p><code>states</code> 部分是状态表达式，用于判断是否满足条件：</p><ul><li>表达式中的空格，会被忽略。</li><li>表达式中， <code>[]</code>(中括号)，包含的内容为具体的状态判断，会包含2部分: <ol><li>状态名称 : 上述例子的 <code>闪避识别-黄光</code></li><li><span style="color:red;"><strong>上一次出现(识别到)这个状态，距离现在过去的时间(秒数)，是否在后续2个数字(包含)的范围内。</strong></span>上述例子的 <code>0, 1</code>。如果没有填入数字，则默认为 <code>0~1</code> 秒内。</li><li>状态表达式为空时，代表一种最终兜底的状态，即恒定判断为真。</li></ol></li><li>表达式中，<code>[]</code>(中括号)后面，可以跟随<code>{}</code>(大括号)，表示判断这个状态下的值，是在后续2个数字(包含)的范围内。数字只能是整数。无大括号时，表示无需考虑状态值。</li><li>表达式支持运算符 <code>&amp;</code>(且), <code>|</code>(或), <code>!</code>(否), <code>()</code>(括号)， <code>&amp;</code> 和 <code>|</code> 没有运算优先级，运算先后顺序建议使用 <code>()</code> 保证。</li></ul><h5 id="状态表达式例子1" tabindex="-1"><a class="header-anchor" href="#状态表达式例子1"><span>状态表达式例子1</span></a></h5><p><code>闪避识别-黄光</code> 的时间是发生在 <code>0~1</code> 秒内，且识别到后台第二个角色是强攻是在 <code>0~1</code> 秒内。</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[闪避识别-黄光, 0, 1] &amp; [后台-2-强攻]&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="状态表达式例子2" tabindex="-1"><a class="header-anchor" href="#状态表达式例子2"><span>状态表达式例子2</span></a></h5><p>连携技左 或者 连携键右 的按键的时间是发生在 <code>0~12</code> 秒内，即粗略表达怪物的失衡时间。</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[按键-连携技-左, 0, 12] | [按键-连携技-右, 0, 12]&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="状态表达式例子3" tabindex="-1"><a class="header-anchor" href="#状态表达式例子3"><span>状态表达式例子3</span></a></h5><p>画面出现黄光、或者红光的时候，且前台不是强攻。这时候可以考虑用强攻角色格挡。</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;([闪避识别-黄光] | [闪避识别-红光]) &amp; ![前台-强攻]&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h5 id="状态表达式例子4" tabindex="-1"><a class="header-anchor" href="#状态表达式例子4"><span>状态表达式例子4</span></a></h5><p>前台角色为朱鸢，且子弹数是6~9颗。</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;([前台-朱鸢] &amp; [自定义-朱鸢-子弹]{6, 9}&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="_1-4-3-指令" tabindex="-1"><a class="header-anchor" href="#_1-4-3-指令"><span>1.4.3.指令</span></a></h4><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-切换角色-上一个&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>满足状态 <code>states</code> 后，可以触发一系列的指令 <code>operations</code>。</p><p>即 <span style="color:red;"><strong>operations 是一个列表</strong></span>，每一个的指令包含两部分:</p><ul><li>op_name: 指令名称。</li><li>post_delay: 除了指令名称外，不同的指令下会有不同的可用参数，这里的 <code>post_delay</code> 就是其中一个，表示按键后等待秒数。</li><li>脚本支持的指令名称和对应的详细参数在下述章节再列举。</li></ul><h3 id="_1-5-子状态" tabindex="-1"><a class="header-anchor" href="#_1-5-子状态"><span>1.5.子状态</span></a></h3><p>状态的判断，是可以层层递进的。在满足某个状态下，再进行子状态(sub_states)的判断，可以让你的状态判断减少重复，便于维护。</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[按键-连携技-左, 0, 12] | [按键-连携技-右, 0, 12]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[前台-朱鸢]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[按键可用-终结技]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-终结技&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[按键可用-特殊攻击]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-特殊攻击&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-普通攻击&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            way</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按下&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            press</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-切换角色-下一个&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上述例子：</p><ul><li>最外层状态为 <code>[按键-连携技-左, 0, 12] | [按键-连携技-右, 0, 12]</code>。代表我们粗略认为的怪物失衡时间内，再做后续判断</li><li>子状态1 <code>[前台-朱鸢]</code>，不满足的时候看子状态2 <code></code>(空)。代表怪物失衡时，我们应该先看前台是不是朱鸢，如果不是，就走子状态2，切换角色。</li><li>子状态1 <code>[前台-朱鸢]</code> 满足时，再看里面的子状态 <code>[按键可用-终结技]</code>, <code>[按键可用-特殊攻击]</code>。代表有大用大，有特殊技用特殊技，什么都没有的时候就长按普通攻击清空弹匣。</li></ul><p>这里对子状态做一个总结说明：</p><ul><li>使用 <code>sub_states</code> 声明这个状态下有子状态，需要继续往下判断。</li><li>子状态 <code>sub_states</code> 也是一个列表，与处理器 (handlers) 一样，里面包含若干个元素，每个元素的包含 <ul><li>states: 状态判断。</li><li>operations: 指令。</li><li>sub_states: 子状态判断。存在时，<code>operations</code>不生效。</li></ul></li><li>子状态可以多层嵌套，只要你不晕就行。</li></ul><h3 id="_1-6-状态处理模板" tabindex="-1"><a class="header-anchor" href="#_1-6-状态处理模板"><span>1.6.状态处理模板</span></a></h3><p>在你编写多个自定义指令的文件后，你会发现有些逻辑是可以共用的，这部分复制粘贴就浪费时间了。场景模板就是承载公共逻辑的地方，让不同的配置文件可以复用。</p><p>引用场景模板的方式如下</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[按键-连携技-左, 0, 12] | [按键-连携技-右, 0, 12]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">state_template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;站场模板-击破站场&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里表示，在不满足第一个状态判断 (粗略判断怪物失衡) 的情况下，接下来的状态判断引用模板 <a href="https://github.com/DoctorReid/ZenlessZoneZero-OneDragon/blob/main/config/auto_battle_state_handler/%E7%AB%99%E5%9C%BA%E6%A8%A1%E6%9D%BF-%E5%87%BB%E7%A0%B4%E7%AB%99%E5%9C%BA.sample.yml" target="_blank" rel="noopener noreferrer">站场模板-击破站场</a></p><p>场景模板的存放位置为 <code>config/auto_battle_state_handler</code>。</p><p>同样，脚本自带部分模板，为 <code>.sample.yml</code> 结尾，你可引用，或复制修复。</p><p>场景模板中的内容格式如下</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[前台-击破]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">state_template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;站场模板-全角色&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[后台-2-击破]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-切换角色-上一个&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[后台-1-击破]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-切换角色-下一个&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">state_template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;站场模板-全角色&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个模板的意思是</p><ol><li>如果前台角色是击破，那继续引用 <code>站场模板-全角色</code>，这里会有各个角色的站场的处理逻辑。</li><li>如果1不满足，就看后台2是不是击破，如果是，就切换角色-上一个</li><li>如果2不满足，就默认使用切换角色-下一个。</li></ol><p>场景模板的整体结构跟上述讲解的场景处理器部分是一致的，它应该包含以下内容：</p><ul><li><code>template_name</code>: 模板名称，用于界面显示、其它文件中引用。多个同名时，会优先取不是 <code>.sample.yml</code> 的。如果用户自定义的模板名字重复，则会随机取一个。</li><li><code>handlers</code>: 处理器部分，同之前描述。</li></ul><p>在加入场景模板后，场景处理器(handlers中的元素)中的完整可用的结构如下：</p><ul><li>states: 状态判断表达式</li><li>operations: 满足states时，需要执行的指令列表</li><li>sub_states: 满足states时，需要进行下一层判断。 <ul><li>sub_states是一个列表，里面元素的结构同handlers中的元素结构。</li><li>出现 sub_states 时，operations无效。</li></ul></li><li>state_template: 引用模板 <ul><li>模板中的handlers结构，同这里的描述。</li><li>出现 state_template 时，states, operations, sub_states无效。</li></ul></li><li>sub_states 和 state_template 可以不断嵌套。</li></ul><p>引用模板后，状态的判断顺序依然从上往下。例如：</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">state_template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">..</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个代表判断状态1，不满足就使用模板逻辑进行判断，还不满足就使用状态3判断。</p><h3 id="_1-7-指令模板" tabindex="-1"><a class="header-anchor" href="#_1-7-指令模板"><span>1.7.指令模板</span></a></h3><p>同理，指令也可以抽出来做模板复用，后续指令模板还可以当输入宏使用，结合闪避助手变成战斗助手。</p><p>引用指令模板的方式，参考<a href="https://github.com/DoctorReid/ZenlessZoneZero-OneDragon/blob/main/config/auto_battle_state_handler/%E7%AB%99%E5%9C%BA%E6%A8%A1%E6%9D%BF-%E5%AE%89%E6%AF%94.sample.yml" target="_blank" rel="noopener noreferrer">站场模板-安比</a></p><p>在 <code>operations</code> 中，填入 <code>operation_template</code>。同样，引入模板后指令依然按顺序执行。</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">operation_template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;安比-3A特殊攻击&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>而一个指令模板的内容结构，参考<a href="https://github.com/DoctorReid/ZenlessZoneZero-OneDragon/blob/main/config/auto_battle_operation/%E5%AE%89%E6%AF%94-3A%E7%89%B9%E6%AE%8A%E6%94%BB%E5%87%BB.sample.yml" target="_blank" rel="noopener noreferrer">安比-3A特殊攻击</a></p><p>模板中仅需包含 <code>指令 operations</code>，结构与上述的指令结构一致。</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在加入指令模板后，<code>operations</code>中的元素的完整可用的结构如下：</p><ul><li>op_name: 指令名称。</li><li>data: 用于执行指令的参数列表，每个参数均为字符串 需要<code>&quot;</code>(双引号)包围。</li><li>operation_template: 指令模板名称。operation_template存在时，前2个参数无效。模板中可继续嵌套模板。</li><li>脚本支持的指令名称和对应参数在下述章节再列举。</li></ul><h3 id="_1-8-自定义状态" tabindex="-1"><a class="header-anchor" href="#_1-8-自定义状态"><span>1.8.自定义状态</span></a></h3><p>为了大家可以更加灵活控制自己的逻辑，脚本提供自定义状态的能力。参考以下例子：</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键可用-连携技&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;![自定义-连携次数, 0, 3]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[后台-2-强攻]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-切换角色-上一个&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.5</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-连携次数&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-切换角色-下一个&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.5</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-连携次数&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;1&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[自定义-连携次数, 0, 3]{1, 2}&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[后台-2-支援]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-切换角色-上一个&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.5</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-连携次数&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;2&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[后台-2-强攻]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-切换角色-上一个&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.5</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-连携次数&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;2&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-切换角色-下一个&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.5</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-连携次数&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;0&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;2&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这一段大概的意思如下：</p><ol><li>在连携技触发的时候，我会通过 <code>自定义-连携次数</code> 来判断已经按了多少次连携了，从而决定我切什么角色。</li><li><code>![自定义-连携次数, 0, 3]</code> 这代表还没有出现这个状态，代表没有按过连携，这时候我们先切强攻角色。</li><li>切换后，我们通过指令 <code>设置状态</code> 来设置 <code>自定义-连携次数</code>这个状态的出现，第一个数值0代表当前时间作为状态的出现时间，第二个数值1代表这个状态的值(连携了1次)。</li><li><code>[自定义-连携次数, 0, 3]{1, 2}</code>，这代表出现这个状态了，而且值在<code>1~2</code>之间，也就是已经按了1~2次连携了，这时候我们优先切支援，其次切强攻。因为我们不知道后续还能有几次连携，尽量让支援最后一个触发快速支援。</li><li>切换后，我们通过指令 <code>设置状态</code> 来设置 <code>自定义-连携次数</code> 这个状态的值为2。</li></ol><p>自定义状态的使用非常灵活，大家可以自由发挥脑洞。</p><p><code>设置状态</code> 指令说明见后续 <code>2.2.可用指令</code> 部分。</p><p>注意：自定义状态的名称，必须以 <code>自定义-</code> 作为前缀。</p><h2 id="_2-基础能力说明" tabindex="-1"><a class="header-anchor" href="#_2-基础能力说明"><span>2.基础能力说明</span></a></h2><p>通过上述示例，你已经能理解自定义指令大概的工作方式了。</p><p>接下来，你就可以挑选合适的<code>状态</code>和<code>指令</code>来构建你的自定义指令。</p><h3 id="_2-1-可用状态" tabindex="-1"><a class="header-anchor" href="#_2-1-可用状态"><span>2.1.可用状态</span></a></h3><table><thead><tr><th>状态名称</th><th>判断条件</th><th>记录时间</th><th>互斥状态</th></tr></thead><tbody><tr><td><code>闪避识别-黄光</code></td><td>游戏画面出现闪避黄光</td><td>截图时间</td><td></td></tr><tr><td><code>闪避识别-红光</code></td><td>游戏画面出现闪避红光</td><td>截图时间</td><td></td></tr><tr><td><code>闪避识别-声音</code></td><td>游戏画面没有闪光，且出现需要闪避的音频</td><td>截图时间</td><td></td></tr><tr><td><code>按键-闪避</code></td><td>脚本执行按键</td><td>按键结束时间</td><td></td></tr><tr><td><code>按键-切换角色-下一个</code></td><td>脚本执行按键</td><td>按键结束时间</td><td></td></tr><tr><td><code>按键-切换角色-上一个</code></td><td>脚本执行按键</td><td>按键结束时间</td><td></td></tr><tr><td><code>按键-普通攻击</code></td><td>脚本执行按键</td><td>按键结束时间</td><td></td></tr><tr><td><code>按键-特殊攻击</code></td><td>脚本执行按键</td><td>按键结束时间</td><td></td></tr><tr><td><code>按键-终结技</code></td><td>脚本执行按键</td><td>按键结束时间</td><td></td></tr><tr><td><code>按键-连携技-左</code></td><td>脚本执行按键</td><td>按键结束时间</td><td></td></tr><tr><td><code>按键-连携技-右</code></td><td>脚本执行按键</td><td>按键结束时间</td><td></td></tr><tr><td><code>按键-连携技-取消</code></td><td>脚本执行按键</td><td>按键结束时间</td><td></td></tr><tr><td><code>按键-移动-前</code></td><td>脚本执行按键</td><td>按键结束时间</td><td></td></tr><tr><td><code>按键-移动-后</code></td><td>脚本执行按键</td><td>按键结束时间</td><td></td></tr><tr><td><code>按键-移动-左</code></td><td>脚本执行按键</td><td>按键结束时间</td><td></td></tr><tr><td><code>按键-移动-右</code></td><td>脚本执行按键</td><td>按键结束时间</td><td></td></tr><tr><td><code>按键-锁定敌人</code></td><td>脚本执行按键</td><td>按键结束时间</td><td></td></tr><tr><td><code>前台-**(角色类型)</code></td><td>前台角色类型=强攻 (举例)</td><td>截图时间</td><td>其它<code>前台-**(角色类型)</code></td></tr><tr><td><code>后台-1-**(角色类型)</code></td><td>后台第一个角色类型=强攻 (举例)</td><td>截图时间</td><td>其它 <code>后台-1-**(角色类型)</code></td></tr><tr><td><code>后台-2-**(角色类型)</code></td><td>后台第二个角色类型=强攻 (举例)</td><td>截图时间</td><td>其它 <code>后台-2-**(角色类型)</code></td></tr><tr><td><code>连携技-1-**(角色类型)</code></td><td>连携技左边角色类型=强攻 (举例)</td><td>截图时间</td><td>其它 <code>连携技-1-**(角色类型)</code></td></tr><tr><td><code>连携技-2-**(角色类型)</code></td><td>连携技右边角色类型=强攻 (举例)</td><td>截图时间</td><td>其它 <code>连携技-2-**(角色类型)</code></td></tr><tr><td><code>快速支援-**(角色类型)</code></td><td>快速支援角色类型=强攻 (举例)</td><td>截图时间</td><td>其它 <code>快速支援-**(角色类型)</code></td></tr><tr><td><code>前台-**(角色名称)</code></td><td>前台角色=安比 (举例)</td><td>截图时间</td><td>其它 <code>前台-**(角色名称)</code></td></tr><tr><td><code>后台-1-**(角色名称)</code></td><td>后台第一个角色=安比 (举例)</td><td>截图时间</td><td>其它 <code>后台-1-**(角色名称)</code></td></tr><tr><td><code>后台-2-**(角色名称)</code></td><td>后台第二个角色=安比 (举例)</td><td>截图时间</td><td>其它 <code>后台-2-**(角色名称)</code></td></tr><tr><td><code>连携技-1-**(角色名称)</code></td><td>连携技左边角色=安比 (举例)</td><td>截图时间</td><td>其它 <code>连携技-1-**(角色名称)</code></td></tr><tr><td><code>连携技-2-**(角色名称)</code></td><td>连携技右边角色=安比 (举例)</td><td>截图时间</td><td>其它 <code>连携技-2-**(角色名称)</code></td></tr><tr><td><code>快速支援-**(角色名称)</code></td><td>快速支援角色=安比 (举例)</td><td>截图时间</td><td>其它 <code>快速支援-**(角色名称)</code></td></tr><tr><td><code>按键可用-特殊攻击</code></td><td>特殊攻击键不是灰色的</td><td>截图时间</td><td></td></tr><tr><td><code>按键可用-终结技</code></td><td>特殊攻击键不是灰色的</td><td>截图时间</td><td></td></tr><tr><td><code>按键可用-连携技</code></td><td>出现连携技头像</td><td>截图时间</td><td></td></tr><tr><td><code>按键可用-快速支援</code></td><td>出现快速支援头像</td><td>截图时间</td><td></td></tr><tr><td><code>前台-能量</code></td><td>左上角能量条 注意能量最大值为120</td><td>截图时间</td><td></td></tr><tr><td><code>后台-1-能量</code></td><td>同上</td><td>截图时间</td><td></td></tr><tr><td><code>后台-2-能量</code></td><td>同上</td><td>截图时间</td><td></td></tr><tr><td><code>前台-血量扣减</code></td><td>左上角血条出现扣减</td><td>截图时间</td><td></td></tr><tr><td><code>自定义-*</code></td><td>自定义的状态</td><td>指令<code>设置状态</code>的参数时间</td><td></td></tr></tbody></table><p>说明:</p><blockquote><ul><li>互斥状态 : 该状态出现后，将会消除互斥状态的出现时间。例如，<code>前台-强攻</code>出现时，就会取消掉<code>前台-击破</code>的状态。</li><li>角色类型 : 包含内容见 <a href="https://github.com/DoctorReid/ZenlessZoneZero-OneDragon/blob/7f65a6720af88bd8f0a1ce02032b7d4ae03d499b/src/zzz_od/game_data/agent.py#L6" target="_blank" rel="noopener noreferrer">agent.py</a></li><li>角色名称 : 包含内容见 <a href="https://github.com/DoctorReid/ZenlessZoneZero-OneDragon/blob/7f65a6720af88bd8f0a1ce02032b7d4ae03d499b/src/zzz_od/game_data/agent.py#L54" target="_blank" rel="noopener noreferrer">agent.py</a></li><li>截图时间 : 截图后，脚本进行识别需要时间，因此状态实际是在<code>截图时间</code>触发。</li><li>按键结束时间 : 脚本执行的按键，人工输入按键不会记录。</li><li>切换角色后，部分状态需要下一次识别才能触发且准确。例如 按键可用-特殊攻击，上一个角色识别可用的情况下，切换到下一个角色时，需要重新判断才能识别是否可用。</li></ul></blockquote><h4 id="_2-1-1-角色状态" tabindex="-1"><a class="header-anchor" href="#_2-1-1-角色状态"><span>2.1.1.角色状态</span></a></h4><p>除了基础状态外，部分角色在前台时会额外触发角色特有的状态。</p><p><strong>所有角色状态，在切换角色后，都需要下一次识别才能触发。</strong></p><table><thead><tr><th>状态名称</th><th>记录时间</th><th>互斥状态</th><th>使用示例</th></tr></thead><tbody><tr><td><code>艾莲-急冻充能</code></td><td>截图时间</td><td></td><td><code>[艾莲-急冻充能]{3, 6}</code></td></tr><tr><td><code>苍角-涡流</code></td><td>截图时间</td><td></td><td><code>[苍角-涡流]{3, 3}</code></td></tr><tr><td><code>朱鸢-子弹数</code></td><td>截图时间</td><td></td><td><code>![朱鸢-子弹数]{7, 10}</code> <br> 当前子弹数小于7 可以用特殊攻击不溢出</td></tr><tr><td><code>青衣-电压</code></td><td>截图时间</td><td></td><td><code>[青衣-电压]{75, 100}</code> <br> 当前可以打重击</td></tr><tr><td><code>赛斯-意气</code></td><td>截图时间</td><td></td><td><code>[赛斯-意气]{75, 100}</code> <br> 当前可以打重击</td></tr><tr><td><code>简-萨霍夫跳</code></td><td>截图时间</td><td></td><td><code>[简-萨霍夫跳]</code> <br> 当前可以用萨霍夫跳 <br> 目前只有检测是否有红点，并没有判断红点数量，因此不需要大括号判断数值</td></tr><tr><td><code>简-狂热心流</code></td><td>截图时间</td><td></td><td><code>[简-狂热心流]{1, 50}</code> <br> 当前可以用萨霍夫跳补充狂热心流了</td></tr></tbody></table><h4 id="_2-1-2-默认模版使用的自定义状态" tabindex="-1"><a class="header-anchor" href="#_2-1-2-默认模版使用的自定义状态"><span>2.1.2.默认模版使用的自定义状态</span></a></h4><p>默认模版中，使用了一些自定义状态，用于优化战斗流程。 这些是模版里进行设置，且需要在状态判断中配合使用的，不是脚本运行时自动附带的。</p><p>如果你想用，可以引用模版，或者参考模版和下述例子自己设置对应的状态。</p><h5 id="_2-1-2-1-自定义-黄光切人" tabindex="-1"><a class="header-anchor" href="#_2-1-2-1-自定义-黄光切人"><span>2.1.2.1.自定义-黄光切人</span></a></h5><p>黄光切人时设置；不同角色格挡攻击后摇时间不同，由角色模版控制等待多长时间进行后续指令</p><details><summary> 设置例子 </summary><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="双反模板-击破.sample.yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[后台-2-击破]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">operation_template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;双反-上一个&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-黄光切人&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[后台-1-击破]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">operation_template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;双反-下一个&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-黄光切人&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details><summary> 使用例子 </summary><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="站场模板-朱鸢.sample.yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[前台-朱鸢]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 格挡出场后</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[自定义-黄光切人]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-普通攻击&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            pre_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1.5</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;清除状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-黄光切人&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-临时站场&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h5 id="_2-1-2-2-自定义-红光闪避" tabindex="-1"><a class="header-anchor" href="#_2-1-2-2-自定义-红光闪避"><span>2.1.2.2.自定义-红光闪避</span></a></h5><p>红光时设置；不同角色闪避攻击后摇时间不同，由角色模版控制等待多长时间进行后续指令</p><details><summary> 设置例子 </summary><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="闪A模板-通用.sample.yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-闪避&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-普通攻击&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-红光闪避&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details><summary> 使用例子 </summary><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="站场模板-朱鸢.sample.yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[前台-朱鸢]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 闪避后</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[自定义-红光闪避]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-普通攻击&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          pre_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.8</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-普通攻击&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          repeat</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;清除状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-红光闪避&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h5 id="_2-1-2-3-自定义-快速支援换人" tabindex="-1"><a class="header-anchor" href="#_2-1-2-3-自定义-快速支援换人"><span>2.1.2.3.自定义-快速支援换人</span></a></h5><p>快速支援换人时设置；不同角色快速支援攻击后摇时间不同，由角色模版控制等待多长时间进行后续指令</p><details><summary> 设置例子 </summary><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="击破站场-强攻速切.sample.yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">scenes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键可用-快速支援&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[按键可用-快速支援]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-切换角色-下一个&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-快速支援换人&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details><summary> 使用例子 </summary><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="站场模板-朱鸢.sample.yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[前台-朱鸢]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[自定义-快速支援换人]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;等待秒数&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;0.5&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;清除状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-快速支援换人&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-临时站场&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h5 id="_2-1-2-4-自定义-连携换人" tabindex="-1"><a class="header-anchor" href="#_2-1-2-4-自定义-连携换人"><span>2.1.2.4.自定义-连携换人</span></a></h5><p>连携换人时设置；不同角色快速支援攻击后摇时间不同，由角色模版控制等待多长时间进行后续指令；同时可用于失衡判断</p><details><summary> 设置例子 </summary><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="连携模板-击破.sample.yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[连携技-1-击破]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-连携技-左&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-连携换人&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[连携技-2-击破]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-连携技-右&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-连携换人&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details><summary> 使用例子 </summary><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="站场模板-朱鸢.sample.yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[前台-朱鸢]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[自定义-连携换人]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;等待秒数&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;1.5&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h5 id="_2-1-2-5-自定义-临时站场" tabindex="-1"><a class="header-anchor" href="#_2-1-2-5-自定义-临时站场"><span>2.1.2.5.自定义-临时站场</span></a></h5><p>想插队站场的时候设置；例如朱鸢黄光出来的时候打几发子弹再切回击破，避免溢出</p><details><summary> 设置例子 </summary><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="站场模板-朱鸢.sample.yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[前台-朱鸢]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 格挡出场后</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[自定义-黄光切人]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-普通攻击&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          pre_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1.5</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;清除状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-黄光切人&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-临时站场&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details><summary> 使用例子 </summary><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="击破站场-强攻速切.sample.yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">scenes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [ ]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.02</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 刚开始未识别到角色时候不要乱切</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">state_template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;通用模板-锁定敌人&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">state_template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;站场模板-未识别角色&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[自定义-黄光切人, 0, 2] | [自定义-红光闪避, 0, 2] | [自定义-临时站场]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">state_template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;站场模板-全角色&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h5 id="_2-1-2-6-自定义-动作不打断" tabindex="-1"><a class="header-anchor" href="#_2-1-2-6-自定义-动作不打断"><span>2.1.2.6.自定义-动作不打断</span></a></h5><p>想指令不被触发器打断时设置，例如青衣在打重击的时候不因为闪光打断</p><details><summary> 设置例子 </summary><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="站场模板-青衣.sample.yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[前台-青衣]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[青衣-电压, 0, 999]{75, 101}&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-动作不打断&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          value</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-普通攻击&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          way</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按下&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          press</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">3.5</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;清除状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-动作不打断&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;清除状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:  </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-青衣-普攻次数&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><details><summary> 使用例子 </summary><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="击破站场-强攻速切.sample.yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">scenes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">triggers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;闪避识别-黄光&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;闪避识别-红光&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;闪避识别-声音&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;![自定义-动作不打断, 0, 999]{1, 1} &amp; [闪避识别-黄光]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">state_template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;双反模板-强攻&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">state_template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;双反模板-击破&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">state_template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;双反模板-下一个&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;![自定义-动作不打断, 0, 999]{1, 1} &amp; ([闪避识别-红光] | [闪避识别-声音])&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">state_template</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;闪A模板-全角色&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h3 id="_2-2-可用指令" tabindex="-1"><a class="header-anchor" href="#_2-2-可用指令"><span>2.2.可用指令</span></a></h3><table><thead><tr><th>指令名称 (op_name)</th><th>参数</th></tr></thead><tbody><tr><td>按键-闪避</td><td>pre_delay - 按键前等待秒数(数字) 默认0<br> post_delay - 按键前等待秒数(数字) 默认0<br>way - 按键方式(点按、按下、松开) 默认点按<br>press - 按下秒数(数字) 不填代表不自动松开<br>repeat - 重复次数(数字) 默认1</td></tr><tr><td>按键-切换角色-下一个</td><td>同上</td></tr><tr><td>按键-切换角色-上一个</td><td>同上</td></tr><tr><td>按键-普通攻击</td><td>同上</td></tr><tr><td>按键-特殊攻击</td><td>同上</td></tr><tr><td>按键-终结技</td><td>同上</td></tr><tr><td>按键-连携技-左</td><td>同上</td></tr><tr><td>按键-连携技-右</td><td>同上</td></tr><tr><td>按键-连携技-取消</td><td>同上。这个按键比较怪，需要按下一段时间才有效</td></tr><tr><td>按键-快速支援</td><td>同上</td></tr><tr><td>按键-移动-前</td><td>同上</td></tr><tr><td>按键-移动-后</td><td>同上</td></tr><tr><td>按键-移动-左</td><td>同上</td></tr><tr><td>按键-移动-右</td><td>同上</td></tr><tr><td>按键-锁定敌人</td><td>同上</td></tr><tr><td>等待秒数</td><td>seconds - 秒数(数字) 默认0</td></tr><tr><td>设置状态</td><td>state - 需要设置的状态名称<br>seconds - 状态触发距离当前时间的偏移秒数，默认0(当前)<br>value - 需要设置的状态值(整数)，默认无<br>add - 对当前状态值进行增加(整数)，value存在时不生效，默认无</td></tr><tr><td>清除状态</td><td>state - 需要设置的状态名称</td></tr></tbody></table><p>说明:</p><ul><li><code>设置状态</code> 和 <code>清除状态</code> 可以作用于任意状态，只要状态名称填对了。</li><li>触发快速支援时，请使用 <code>按键-快速支援</code>，这样脚本可以正确计算切换的角色。</li></ul><h3 id="_2-3-终结技" tabindex="-1"><a class="header-anchor" href="#_2-3-终结技"><span>2.3.终结技</span></a></h3><p>游戏中，终结技是共用的，如果你希望只能由特定角色使用终结技，可以在文件中加入 <code>allow_ultimate</code></p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">allow_ultimate</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">agent_type</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;强攻&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">agent_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;安比&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>allow_ultimate</code>是一个列表，里面的元素可以包含 <code>角色类型 agent_type</code> 或者 <code>角色名称 agent_name</code></p><p>配置文件中存在 <code>allow_ultimate</code> 时，只有这里定义的角色在前台，<code>按键可用-终结技</code>才会被触发。</p><h3 id="_2-4-识别间隔" tabindex="-1"><a class="header-anchor" href="#_2-4-识别间隔"><span>2.4.识别间隔</span></a></h3><p>识别过程是持续不断的，过于频繁的识别可能带来性能问题，过少的识别可能会反应不及时，因此脚本提供了 <code>识别间隔</code> 的配置。</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">check_dodge_interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.02</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">check_agent_interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">check_special_attack_interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">check_ultimate_interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.6</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">check_chain_interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.9</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1.1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">check_quick_interval</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.9</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1.1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>识别间隔可以是一个数字，也可以是两个数字代表一个随机区间。不填入时脚本有默认的间隔。</p><p>目前支持以下识别间隔</p><ul><li>check_dodge_interval - 闪避黄光/红光的识别间隔。默认0.02秒。</li><li>check_agent_interval - 识别角色的间隔，理论上只要正确识别5次就足够了，后续脚本会根据按键计算，因此间隔可以大一点。默认0.5秒。</li><li>check_special_attack_interval - 识别特殊攻击按键是否可用的间隔。默认0.5秒。</li><li>check_ultimate_interval - 识别终结技按键是否可用的间隔。默认0.5秒。</li><li>check_chain_interval - 识别连携技按键是否可用的间隔。默认1秒。</li><li>check_quick_interval - 识别快速支援按键是否可用的间隔。默认0.5秒。</li></ul><h2 id="_3-编写建议" tabindex="-1"><a class="header-anchor" href="#_3-编写建议"><span>3.编写建议</span></a></h2><h3 id="_3-1-文件存储" tabindex="-1"><a class="header-anchor" href="#_3-1-文件存储"><span>3.1.文件存储</span></a></h3><p>脚本提供的默认配置文件都是以 <code>.sample.yml</code> 结尾的，不要修改这部分文件，也不要新建这种后缀名的文件。否则代码同步时会被作者内容覆盖。</p><p>你可以复制改名后再修改使用，各种文件的存放路径统一如下</p><ul><li>自动战斗 : config/auto_battle</li><li>闪避助手 : config/dodge</li><li>场景处理器模板 : config/auto_battle_state_handler</li><li>指令模板 : config/auto_battle_operation</li></ul><h3 id="_3-2-触发器" tabindex="-1"><a class="header-anchor" href="#_3-2-触发器"><span>3.2.触发器</span></a></h3><ul><li><span style="color:red;"><strong>偶尔突发的事件，可以用作触发器</strong></span>，例如 闪避识别、连携技、快速支援、爆发技 等，这可以让你的指令在特殊情况下立刻响应。</li><li>而<span style="color:red;"><strong>高频出现的事件</strong></span>，例如 识别到前台角色是安比，这种就<span style="color:red;"><strong>不建议在触发器中使用</strong></span>。因为高频的触发判断，可以引起性能问题，后续不方便维护。</li><li><span style="color:red;"><strong>不需要事件触发的场景，代表平时没有怪物或者其它事件来打断你的操作的场景，用来做角色的连招。</strong></span></li></ul><p>后续脚本框架的发展优化也会以这个为基础思想。</p><h3 id="_3-3-嵌套触发" tabindex="-1"><a class="header-anchor" href="#_3-3-嵌套触发"><span>3.3.嵌套触发</span></a></h3><p>试想这么一种场景，你在 触发器1 <code>闪避识别-黄光</code> 里做了一个切人+平A，假如切出的是安比，那会触发一个 <code>前台-安比</code> 的事件。此时，如果你的指令中，有使用 <code>前台-安比</code> 作为触发器2的话，那么触发器2的动作将会执行，触发器1的平A可能会被打断。</p><p>因此，<span style="color:red;"><strong>需要小心自己指令中是否存在嵌套触发的情况</strong></span>，避免指令丢失。</p><h3 id="_3-4-攻击按键" tabindex="-1"><a class="header-anchor" href="#_3-4-攻击按键"><span>3.4.攻击按键</span></a></h3><p>游戏中的默认按键，攻击是鼠标的左击，连携技也有鼠标的点击。<span style="color:red;"><strong>建议单独给脚本分配一个普通攻击的按键</strong></span>，避免脚本使用鼠标左击进行普通攻击时把连携按掉了。</p><h3 id="_3-5-失衡判断" tabindex="-1"><a class="header-anchor" href="#_3-5-失衡判断"><span>3.5.失衡判断</span></a></h3><p>目前不支持怪物的失衡识别，但可以通过 <code>按键-连携键-左</code> 和 <code>按键-连携技-右</code> 进行取巧的判断。</p><p>即触发连携后，就认为怪物进入失衡了，这时候大概有10+秒的输出空间。</p><div class="language-yml line-numbers-mode" data-highlighter="shiki" data-ext="yml" data-title="yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">- </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[按键-连携键-左, 0, 12] | [按键-连携键-右, 0, 12]&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="_3-6-长按按键" tabindex="-1"><a class="header-anchor" href="#_3-6-长按按键"><span>3.6.长按按键</span></a></h3><p>部分角色可能可以通过一直长按攻击键能打出连招，但<span style="color:red;"><strong>不推荐使用过长(2s以上)的按键时间</strong></span>。</p><p>因为这种操作会一直占据某个按键，甚至一直占据着运行资源，容易在事件触发时造成按键冲突，或无法立刻对事件做出响应。例如闪光时按的闪避无效。</p><p>你可以拆分成多个 <code>按下</code> 指令，每个指令是较短的时间，这样脚本能更好打断当前运行。</p><p>参考 <a href="https://github.com/DoctorReid/ZenlessZoneZero-OneDragon/blob/main/config/auto_battle_operation/%E6%9C%B1%E9%B8%A2-%E8%93%84%E5%8A%9B3A.sample.yml" target="_blank" rel="noopener noreferrer">朱鸢-蓄力3A</a></p><h3 id="_3-7-指令长度" tabindex="-1"><a class="header-anchor" href="#_3-7-指令长度"><span>3.7.指令长度</span></a></h3><p>由于是采取模拟按键的方式去执行指令，执行过程稍有偏差就会导致角色&quot;呆呆&quot;的，因此不建议一个状态判断里执行过多的指令。</p><h3 id="_3-8-切换角色后的状态判断" tabindex="-1"><a class="header-anchor" href="#_3-8-切换角色后的状态判断"><span>3.8.切换角色后的状态判断</span></a></h3><p>连携、快速支援、格挡、手动换人等切换角色后，<span style="color:red;"><strong>建议加入对应状态判断用于过度</strong></span></p><details><summary> 例子 </summary><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="站场模板-朱鸢.sample.yml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">handlers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">  - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[前台-朱鸢]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    sub_states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">      # 格挡出场后</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[自定义-黄光切人]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;按键-普通攻击&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            pre_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">0.2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            post_delay</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">1.5</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;清除状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-黄光切人&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-临时站场&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">      - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">states</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;[自定义-快速支援换人]&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        operations</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;等待秒数&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;0.5&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;清除状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            data</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [ </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-快速支援换人&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> ]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">          - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">op_name</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;设置状态&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">            state</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;自定义-临时站场&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><p>这么写的作用有</p><ul><li>可以控制换人后摇动作的时间，在后摇结束后才开始正常连招，防止占用了正常连招的时间导致正常连招卡顿。</li><li>可以给脚本时间识别切换角色后的状态，例如终结技是否可用、朱鸢子弹数是多少等。因为切换角色的瞬间是没有下一个角色的这些状态的，切换角色后立刻开始正常的状态判断的话，就会出现类似有终结技但不使用，连招一轮后再使用的情况</li></ul><h3 id="_3-9-状态的时间判断" tabindex="-1"><a class="header-anchor" href="#_3-9-状态的时间判断"><span>3.9.状态的时间判断</span></a></h3><p>大部分状态判断都使用了默认值，例如 <code>[青衣-电压]{75, 100}</code> 就是 <code>1秒内</code>识别到青衣的电压为75以上。</p><p><span style="color:red;"><strong>默认值的优势是保证了状态的及时性。</strong></span></p><p>而自定义时间范围可以有以下作用：</p><ul><li>控制作用时间。例如 <code>[按键-连携技-左, 0, 12] | [按键-连携技-右, 0, 12]</code> 粗略代表了失衡时间。</li><li>可以沿用旧的识别结果。例如 <code>[青衣-电压, 0, 999]{75, 100}</code>，代表999秒内识别到这个电压的状态都能使用，这可以让切人瞬间就知道能打重击。但需注意，这种写法需要自行保证 <strong>无法识别的过程中，状态不会改变</strong>。本例子就是青衣在后台时电压不会改变。</li></ul><h2 id="_4-编写调试" tabindex="-1"><a class="header-anchor" href="#_4-编写调试"><span>4.编写调试</span></a></h2><h3 id="_4-1-指令模板调试" tabindex="-1"><a class="header-anchor" href="#_4-1-指令模板调试"><span>4.1.指令模板调试</span></a></h3><p>要让你的配置能流畅在自动战斗中使用，建议先对角色的连招进行调试，即先保证你的每一套连招，都能流畅运行。</p><p>你可以将你的连招指令，写成一个指令模板，保存在 <code>config/auto_battle_operation</code> 文件夹中，不要使用 <code>.sample.yml</code>后缀。</p><p>项目中已经包含部分角色的指令模板可以使用，你也可以使用。</p><p>同时希望大家在完成自己的连招模板后共享出来。</p><p>弄了指令模板后，进入【战斗助手】-【指令调试】，然后进入游戏训练场，按F9开始调试。</p><p><span style="color:red;"><strong>一个好的指令模板，应该能自己流畅循环</strong></span>，所以建议在训练场中，开启敌人无敌，关闭失衡，单纯循环指令不卡顿即可。</p><p>比较容易的调试方式是，最开始只在模板填写2个指令+1个等待时间，调节等待时间让角色能做出第2个动作后，再增加下一个等待时间和指令。直到一套连招都填入后，追加一个最后的等待时间处理角色僵直。最后就可以让这套连招顺畅循环。</p><h3 id="_4-2-场景调试" tabindex="-1"><a class="header-anchor" href="#_4-2-场景调试"><span>4.2.场景调试</span></a></h3><p>在你的每一套角色连招都能流畅循环后，就可以进入场景调试了。入口在【战斗助手】-【自动战斗】上方的调试按钮。</p><p>原理是，对游戏画面进行一次截图和识别，然后再运行状态判断和执行指令。</p><p>如果调试时候脚本没有按预期做出动作，那你可以只保留部分 <code>states</code> 进行调试</p><p>在所有场景都调试通过后，你的配置文件基本就能顺畅运行了。</p><p>部分场景有前置依赖，可以通过新建另一个测试配置文件，只写入需要测试的场景进行测试。</p><h2 id="_5-部分原理说明" tabindex="-1"><a class="header-anchor" href="#_5-部分原理说明"><span>5.部分原理说明</span></a></h2><p>下述会列举一些大家在编写自定义指令时，大家可能想了解的脚本运行机制。</p><h3 id="_5-1-角色识别" tabindex="-1"><a class="header-anchor" href="#_5-1-角色识别"><span>5.1.角色识别</span></a></h3><p>在战斗画面对头像进行识别，开始时，以全角色进行匹配识别，效率较低。在连续5次识别成功且角色一致后，就会记录下来这批角色，后续只用这部分角色来识别。</p><p>脚本中，触发会换人的按键时，会自动计算并更新角色列表，避免在换人途中短时间内的白色头像无法识别。相关指令如下</p><ul><li>按键-切换角色-下一个</li><li>按键-切换角色-上一个</li><li>按键-连携技-左</li><li>按键-连携技-右</li><li>按键-快速支援</li></ul><p>在更新角色同时，会对同时更新以下状态</p><ul><li>**-能量 - 跟随角色变化</li><li>按键可用-终结技 - 会重新判断</li><li>按键可用-特殊攻击 - 会置为不可用，等待下一次识别</li></ul>`,210)]))}const d=i(t,[["render",e],["__file","feat_custom_op.html.vue"]]),r=JSON.parse('{"path":"/zzz/zh/docs/feat_custom_op.html","title":"功能-自定义指令","lang":"zh-CN","frontmatter":{"lang":"zh-CN","title":"功能-自定义指令","description":"1.基础讲解 自定义指令，本质上就是一个识别画面的线程和一个操作的线程在同时运行。 识别画面的线程，对游戏画面进行识别后，通过触发和设置各种状态，来指导操作的线程做具体的操作。 操作的线程，会区分常规循环操作和特殊事件触发操作。没有特殊事件时，以常规循环操作；发生特殊事件时，打断当前操作，进行特殊事件对应的操作。 换成游戏过程来解释就是，假设我当前配队...","head":[["meta",{"property":"og:url","content":"https://one-dragon.org/zzz/zh/docs/feat_custom_op.html"}],["meta",{"property":"og:site_name","content":"一条龙小助手"}],["meta",{"property":"og:title","content":"功能-自定义指令"}],["meta",{"property":"og:description","content":"1.基础讲解 自定义指令，本质上就是一个识别画面的线程和一个操作的线程在同时运行。 识别画面的线程，对游戏画面进行识别后，通过触发和设置各种状态，来指导操作的线程做具体的操作。 操作的线程，会区分常规循环操作和特殊事件触发操作。没有特殊事件时，以常规循环操作；发生特殊事件时，打断当前操作，进行特殊事件对应的操作。 换成游戏过程来解释就是，假设我当前配队..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-09-29T04:27:19.000Z"}],["meta",{"property":"article:modified_time","content":"2024-09-29T04:27:19.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"功能-自定义指令\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-09-29T04:27:19.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"DoctorReid\\",\\"url\\":\\"https://one-dragon.org\\"}]}"]]},"headers":[{"level":2,"title":"1.基础讲解","slug":"_1-基础讲解","link":"#_1-基础讲解","children":[{"level":3,"title":"1.1.配置文件","slug":"_1-1-配置文件","link":"#_1-1-配置文件","children":[]},{"level":3,"title":"1.2.场景与触发器","slug":"_1-2-场景与触发器","link":"#_1-2-场景与触发器","children":[]},{"level":3,"title":"1.3.触发器优先级","slug":"_1-3-触发器优先级","link":"#_1-3-触发器优先级","children":[]},{"level":3,"title":"1.4.状态判断及动作","slug":"_1-4-状态判断及动作","link":"#_1-4-状态判断及动作","children":[]},{"level":3,"title":"1.5.子状态","slug":"_1-5-子状态","link":"#_1-5-子状态","children":[]},{"level":3,"title":"1.6.状态处理模板","slug":"_1-6-状态处理模板","link":"#_1-6-状态处理模板","children":[]},{"level":3,"title":"1.7.指令模板","slug":"_1-7-指令模板","link":"#_1-7-指令模板","children":[]},{"level":3,"title":"1.8.自定义状态","slug":"_1-8-自定义状态","link":"#_1-8-自定义状态","children":[]}]},{"level":2,"title":"2.基础能力说明","slug":"_2-基础能力说明","link":"#_2-基础能力说明","children":[{"level":3,"title":"2.1.可用状态","slug":"_2-1-可用状态","link":"#_2-1-可用状态","children":[]},{"level":3,"title":"2.2.可用指令","slug":"_2-2-可用指令","link":"#_2-2-可用指令","children":[]},{"level":3,"title":"2.3.终结技","slug":"_2-3-终结技","link":"#_2-3-终结技","children":[]},{"level":3,"title":"2.4.识别间隔","slug":"_2-4-识别间隔","link":"#_2-4-识别间隔","children":[]}]},{"level":2,"title":"3.编写建议","slug":"_3-编写建议","link":"#_3-编写建议","children":[{"level":3,"title":"3.1.文件存储","slug":"_3-1-文件存储","link":"#_3-1-文件存储","children":[]},{"level":3,"title":"3.2.触发器","slug":"_3-2-触发器","link":"#_3-2-触发器","children":[]},{"level":3,"title":"3.3.嵌套触发","slug":"_3-3-嵌套触发","link":"#_3-3-嵌套触发","children":[]},{"level":3,"title":"3.4.攻击按键","slug":"_3-4-攻击按键","link":"#_3-4-攻击按键","children":[]},{"level":3,"title":"3.5.失衡判断","slug":"_3-5-失衡判断","link":"#_3-5-失衡判断","children":[]},{"level":3,"title":"3.6.长按按键","slug":"_3-6-长按按键","link":"#_3-6-长按按键","children":[]},{"level":3,"title":"3.7.指令长度","slug":"_3-7-指令长度","link":"#_3-7-指令长度","children":[]},{"level":3,"title":"3.8.切换角色后的状态判断","slug":"_3-8-切换角色后的状态判断","link":"#_3-8-切换角色后的状态判断","children":[]},{"level":3,"title":"3.9.状态的时间判断","slug":"_3-9-状态的时间判断","link":"#_3-9-状态的时间判断","children":[]}]},{"level":2,"title":"4.编写调试","slug":"_4-编写调试","link":"#_4-编写调试","children":[{"level":3,"title":"4.1.指令模板调试","slug":"_4-1-指令模板调试","link":"#_4-1-指令模板调试","children":[]},{"level":3,"title":"4.2.场景调试","slug":"_4-2-场景调试","link":"#_4-2-场景调试","children":[]}]},{"level":2,"title":"5.部分原理说明","slug":"_5-部分原理说明","link":"#_5-部分原理说明","children":[{"level":3,"title":"5.1.角色识别","slug":"_5-1-角色识别","link":"#_5-1-角色识别","children":[]}]}],"git":{"createdTime":1725184952000,"updatedTime":1727584039000,"contributors":[{"name":"DoctorReid","username":"DoctorReid","email":"doctorreid2024@outlook.com","commits":9,"url":"https://github.com/DoctorReid"}]},"readingTime":{"minutes":34.33,"words":10300},"filePathRelative":"zzz/zh/docs/feat_custom_op.md","localizedDate":"2024年9月1日","autoDesc":true}');export{d as comp,r as data};
